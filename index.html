<!DOCTYPE html>
<head>
<link rel="stylesheet" href="js/leaflet.css" />
<script src="js/leaflet.js"></script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://cdn.plot.ly/plotly-2.14.0.min.js"></script>


<style>
#my-map {
	width:960px;
	height:500px;
}

.header {
  padding: 60px;
  text-align: center;
  background: #1abc9c;
  color: white;
  font-size: 30px;
}
</style>
</head>

<body>

    <div class="header">
      <h1>Lymm Segments</h1>
      <p>The race is on for 144 segments</p>
    </div>

    <div id='bar_chart'></div>
    <div id='line_chart'></div>
    

	<div id="my-map"></div>
<script>
window.onload = function () {

    // Plotting
    var data = [{
      type: 'bar',
      x: [16, 18],
      y: ['Thom  ', 'Fae   '],
      orientation: 'h'
    }];
    
    Plotly.newPlot('bar_chart', data);
    
    var trace1 = {
      x: [0, 1, 2, 3, 4, 5, 6, 7, 8],
      y: [1, 1, 1, 3, 8, 8, 8, 11, 16],
      type: 'scatter',
      name: 'Thom'
    };
    
    var trace2 = {
      x: [0, 1, 2, 3, 4, 5, 6, 7, 8],
      y: [0, 2, 5, 6, 14, 14, 14, 18, 18],
      type: 'scatter',
      name: 'Fae'
    };
    
    var timedata = [trace1, trace2];
    
    Plotly.newPlot('line_chart', timedata);

    // Mapping
    var basemap = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
		attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
	});

    $.getJSON("map.geojson", function(data) {

    var geojson = L.geoJson(data, {
    
      pointToLayer: function (feature, latlng) {
       var smallIcon = L.icon({
                          iconSize: [8, 8],
                          iconAnchor: [8, 8],
                          popupAnchor:  [8, 8],
                          iconUrl: 'icons/green_dot.png'
                  });

         return L.marker(latlng, {icon: smallIcon});
        },
    
      onEachFeature: function (feature, layer) {
        layer.bindPopup(feature.properties.Name);
      }
    });

    var map = L.map('my-map')
    .fitBounds(geojson.getBounds())
    .setView([53.380645, -2.478618], 12);

    basemap.addTo(map);
    geojson.addTo(map);
  });

};
</script>
</body>
</html>